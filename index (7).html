
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GoTon- PREMIUM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://sad.adsgram.ai/js/adsgram-ad-sdk.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, increment, onSnapshot, collection, addDoc, query, where, orderBy, limit, runTransaction } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB2kfqxrUwMf5EFQ-WKAKWk8WWb1J5MZXM",
            authDomain: "ahmed-3b928.firebaseapp.com",
            projectId: "ahmed-3b928",
            storageBucket: "ahmed-3b928.firebasestorage.app",
            messagingSenderId: "942494598820",
            appId: "1:942494598820:web:97bd58fe0ab1d58d29c831",
            measurementId: "G-TMKTYHBZVW"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        const tg = window.Telegram?.WebApp;
        window.tg = tg; 

        if (tg && tg.HapticFeedback) {
            const originalImpact = tg.HapticFeedback.impactOccurred;
            const originalNotification = tg.HapticFeedback.notificationOccurred;
            tg.HapticFeedback.impactOccurred = function(style) {
                if (tg.isVersionAtLeast('6.1')) originalImpact.call(tg.HapticFeedback, style);
            };
            tg.HapticFeedback.notificationOccurred = function(type) {
                if (tg.isVersionAtLeast('6.1')) originalNotification.call(tg.HapticFeedback, type);
            };
        }

        const userId = String(tg?.initDataUnsafe?.user?.id || "6472891");
        let referralId = null;
        if (tg?.initDataUnsafe?.start_param) {
            referralId = String(tg.initDataUnsafe.start_param).trim();
            if (referralId === "" || referralId === userId) referralId = null;
        }

        let AdController = { show: () => Promise.resolve() };
        if (window.Adsgram) {
            AdController = window.Adsgram.init({ blockId: "4364" });
        }

        let userData = { balance: 0, refs: 0, adsCount: 3 };
        let GLOBAL_CONFIG = {
            mining_profit: 0.00001, mining_time: 3600, faucet_profit: 0.00005,
            faucet_time: 3600, ads_profit: 0.0001, ads_daily_limit: 3,
            ref_bonus: 0.0001, min_withdraw: 0.01 
        };

        function syncGlobalConfig() {
            onSnapshot(doc(db, "settings", "master"), (snap) => {
                if(snap.exists()) { GLOBAL_CONFIG = snap.data(); updateUI(); }
            });
            onSnapshot(doc(db, "settings", "notice"), (snap) => {
                if(snap.exists() && tg) {
                    const data = snap.data();
                    if(data.text) tg.showAlert("ðŸ“¢ SYSTEM NOTICE:\n\n" + data.text);
                }
            });
        }

        window.flyProfit = (cardId) => {
            const card = document.getElementById(cardId);
            const balanceEl = document.getElementById('main-balance');
            if(!card || !balanceEl) return;
            const cardRect = card.getBoundingClientRect();
            const balanceRect = balanceEl.getBoundingClientRect();
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'fa-solid fa-gem fly-particle';
                particle.style.left = (cardRect.left + cardRect.width/2) + 'px';
                particle.style.top = (cardRect.top + cardRect.height/2) + 'px';
                const destinationX = (balanceRect.left + balanceRect.width/2) - (cardRect.left + cardRect.width/2);
                const destinationY = (balanceRect.top + balanceRect.height/2) - (cardRect.top + balanceRect.height/2);
                particle.style.setProperty('--destX', `${destinationX}px`);
                particle.style.setProperty('--destY', `${destinationY}px`);
                particle.style.animationDelay = (i * 0.1) + 's';
                document.body.appendChild(particle);
                setTimeout(() => particle.remove(), 1000);
            }
        };

        async function initApp() {
            syncGlobalConfig(); 
            const userRef = doc(db, "users", userId);
            
            try {
                const configSnap = await getDoc(doc(db, "settings", "master"));
                if(configSnap.exists()) GLOBAL_CONFIG = configSnap.data();

                await runTransaction(db, async (transaction) => {
                    const snap = await transaction.get(userRef);
                    if (!snap.exists()) {
                        const initialData = { 
                            balance: 0, miningStart: 0, faucetStart: 0, 
                            adsCount: Number(GLOBAL_CONFIG.ads_daily_limit || 3), 
                            lastAdsTime: 0, adsResetTime: 0, 
                            adsRunning: false, refs: 0, 
                            invitedBy: referralId,
                            username: tg?.initDataUnsafe?.user?.username || "Anonymous",
                            status: "active", createdAt: Date.now()
                        };

                        if (referralId) {
                            const inviterRef = doc(db, "users", referralId);
                            const inviterSnap = await transaction.get(inviterRef);
                            if (inviterSnap.exists()) {
                                const invData = inviterSnap.data();
                                const currentBalance = Number(invData.balance || 0);
                                const currentRefs = Number(invData.refs || 0);
                                const bonus = Number(GLOBAL_CONFIG.ref_bonus || 0.0001);
                                transaction.update(inviterRef, {
                                    balance: currentBalance + bonus,
                                    refs: currentRefs + 1
                                });
                            }
                        }
                        transaction.set(userRef, initialData);
                    } else {
                        const data = snap.data();
                        if(data.status === 'banned') {
                            document.body.innerHTML = `
                                <div class="fixed inset-0 bg-black flex flex-col items-center justify-center p-10 text-center">
                                    <div class="w-24 h-24 bg-red-500/10 rounded-full flex items-center justify-center mb-6 animate-pulse">
                                        <i class="fa-solid fa-user-slash text-4xl text-red-500"></i>
                                    </div>
                                    <h1 class="text-white text-2xl font-black uppercase mb-2">Account Restricted</h1>
                                    <p class="text-gray-500 text-sm mb-8 leading-relaxed">Your access has been suspended due to violations of our Terms of Service.</p>
                                    <div class="w-full h-1 bg-red-500/20 rounded-full overflow-hidden">
                                        <div class="h-full bg-red-500 w-1/2 animate-[shimmer_2s_infinite]"></div>
                                    </div>
                                </div>`;
                        } else {
                            checkOfflineProfits(data);
                        }
                    }
                });
            } catch(e) { 
                console.error("Initialization Error:", e.message || e); 
            }

            onSnapshot(userRef, (d) => { if(d.exists()) { userData = d.data(); updateUI(); } });
            startAllTimers();
            loadWithdrawHistory();
            loadReferralList();
        }

        function checkOfflineProfits(data) {
            const now = Date.now();
            let totalToClaim = 0;
            const batchUpdate = {};
            if (data.miningStart > 0 && (now - data.miningStart)/1000 >= GLOBAL_CONFIG.mining_time) {
                totalToClaim += Number(GLOBAL_CONFIG.mining_profit); batchUpdate.miningStart = 0;
            }
            if (data.faucetStart > 0 && (now - data.faucetStart)/1000 >= GLOBAL_CONFIG.faucet_time) {
                totalToClaim += Number(GLOBAL_CONFIG.faucet_profit); batchUpdate.faucetStart = 0;
            }
            if (totalToClaim > 0) {
                batchUpdate.balance = increment(totalToClaim);
                updateDoc(doc(db, "users", userId), batchUpdate);
                showProfitModal(totalToClaim);
            }
        }

        window.createCoins = () => {
            for (let i = 0; i < 30; i++) {
                const coin = document.createElement('div');
                coin.className = 'coin-particle fa-solid fa-gem'; 
                coin.style.left = Math.random() * 100 + 'vw';
                coin.style.animationDuration = (Math.random() * 2 + 1) + 's';
                coin.style.fontSize = (Math.random() * 15 + 15) + 'px';
                coin.style.opacity = Math.random();
                document.body.appendChild(coin);
                setTimeout(() => coin.remove(), 3000);
            }
        };

        window.showProfitModal = (amount) => {
            const modal = document.getElementById('profit-modal');
            const display = document.getElementById('profit-amount-display');
            if(!modal || !display) return;
            display.innerText = Number(amount || 0).toFixed(5);
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            createCoins();
            if(tg?.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
        };

        window.closeProfitModal = () => {
            const modal = document.getElementById('profit-modal');
            if(modal) { 
                modal.classList.add('modal-exit');
                setTimeout(() => {
                    modal.classList.add('hidden'); 
                    modal.classList.remove('flex', 'modal-exit');
                }, 300);
            }
        };

        window.showPage = (pageId) => {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            const targetPage = document.getElementById(pageId);
            if(targetPage) targetPage.classList.remove('hidden');
            
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            const clickedBtn = Array.from(document.querySelectorAll('.nav-btn')).find(btn => 
                (pageId === 'home-page' && btn.querySelector('.fa-microchip')) ||
                (pageId === 'friends-page' && btn.querySelector('.fa-user-plus')) ||
                (pageId === 'withdraw-page' && btn.querySelector('.fa-vault'))
            );
            if(clickedBtn) clickedBtn.classList.add('active');
            
            if(tg?.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
            
            const isLight = document.body.classList.contains('light-mode');
            if (isLight) {
                document.body.style.background = pageId === 'home-page' ? "#f8fafc" : (pageId === 'friends-page' ? "#f5f3ff" : "#f0f9ff");
            } else {
                document.body.style.background = pageId === 'home-page' ? "#000000" : (pageId === 'friends-page' ? "#0d0216" : "#020b16");
            }
        };

        window.copyRefLink = () => {
            const link = `https://t.me/Gotonfree_bot?start=${userId}`; 
            navigator.clipboard.writeText(link);
            window.showToast("Link copied to clipboard!");
        };

        function startAllTimers() {
            setInterval(syncMining, 100); 
            setInterval(syncFaucet, 100);
            setInterval(syncAds, 100);
        }

        window.startMining = async () => {
            if(userData.miningStart > 0) return;
            try { await AdController.show(); } catch (e) {}
            triggerEffect('mining-card');
            await updateDoc(doc(db, "users", userId), { miningStart: Date.now() });
        };

        function syncMining() {
            const card = document.getElementById('mining-card');
            const timer = document.getElementById('m-timer');
            const profit = document.getElementById('m-profit');
            if(!card || !timer || !profit) return;
            if (userData.miningStart > 0) {
                const el = (Date.now() - userData.miningStart)/1000;
                if(el >= GLOBAL_CONFIG.mining_time) {
                    flyProfit('mining-card'); 
                    updateDoc(doc(db, "users", userId), {balance: increment(Number(GLOBAL_CONFIG.mining_profit)), miningStart: 0});
                    showProfitModal(GLOBAL_CONFIG.mining_profit);
                } else {
                    card.classList.add('pulse-blue');
                    timer.innerText = formatTime(GLOBAL_CONFIG.mining_time - el);
                    profit.innerText = ((el/GLOBAL_CONFIG.mining_time) * GLOBAL_CONFIG.mining_profit).toFixed(7);
                }
            } else {
                card.classList.remove('pulse-blue'); timer.innerText = "READY"; profit.innerText = "0.0000000";
            }
        }

        window.claimFaucet = async () => {
            if(userData.faucetStart > 0) return;
            try { await AdController.show(); } catch (e) {}
            triggerEffect('faucet-card');
            await updateDoc(doc(db, "users", userId), { faucetStart: Date.now() });
        };

        function syncFaucet() {
            const card = document.getElementById('faucet-card');
            const machine = document.getElementById('machine-anim');
            const timer = document.getElementById('f-timer');
            const profit = document.getElementById('f-profit');
            if(!card || !timer || !profit) return;
            if (userData.faucetStart > 0) {
                const el = (Date.now() - userData.faucetStart)/1000;
                if(el >= GLOBAL_CONFIG.faucet_time) {
                    flyProfit('faucet-card'); 
                    updateDoc(doc(db,"users",userId), {balance: increment(Number(GLOBAL_CONFIG.faucet_profit)), faucetStart: 0});
                    if(machine) machine.classList.remove('active-mining');
                    showProfitModal(GLOBAL_CONFIG.faucet_profit);
                } else {
                    card.classList.add('pulse-gold'); if(machine) machine.classList.add('active-mining');
                    timer.innerText = formatTime(GLOBAL_CONFIG.faucet_time - el);
                    profit.innerText = ((el/GLOBAL_CONFIG.faucet_time) * GLOBAL_CONFIG.faucet_profit).toFixed(7);
                }
            } else {
                card.classList.remove('pulse-gold'); if(machine) machine.classList.remove('active-mining');
                timer.innerText = "READY"; profit.innerText = "0.0000000";
            }
        }

        window.watchAd = async function() {
            const now = Date.now();
            if (userData.adsCount === 0 && now >= userData.adsResetTime) {
                await updateDoc(doc(db, "users", userId), { adsCount: Number(GLOBAL_CONFIG.ads_daily_limit), adsResetTime: 0, adsRunning: false });
                return;
            }
            if (userData.adsRunning || (userData.adsCount <= 0 && now < userData.adsResetTime)) return;
            try { await AdController.show(); } catch (e) {}
            triggerEffect('ads-card');
            await updateDoc(doc(db, "users", userId), { lastAdsTime: now, adsRunning: true });
        };

        function syncAds() {
            const card = document.getElementById('ads-card');
            const timer = document.getElementById('ads-timer');
            const profit = document.getElementById('a-profit');
            const btn = document.getElementById('ads-btn');
            if(!card || !timer || !profit || !btn) return;
            const now = Date.now();
            if (userData.adsRunning) {
                const elapsed = (now - userData.lastAdsTime) / 1000;
                if (elapsed >= 60) { finishAd(); } else {
                    card.classList.add('pulse-green'); timer.innerText = formatTime(60 - elapsed);
                    profit.innerText = ((elapsed/60) * GLOBAL_CONFIG.ads_profit).toFixed(7);
                    btn.disabled = true; btn.innerText = "RUNNING";
                }
            } else {
                card.classList.remove('pulse-green'); btn.disabled = false; btn.innerText = "WATCH AD"; profit.innerText = "0.0000000";
                if (userData.adsCount > 0) {
                    timer.innerHTML = `READY (<span id="ads-count">${userData.adsCount}</span>/${GLOBAL_CONFIG.ads_daily_limit})`;
                } else {
                    const remainingReset = Math.max(0, (userData.adsResetTime - now)/1000);
                    timer.innerText = remainingReset > 0 ? formatTime(remainingReset) : "RESETTING";
                }
            }
        }

        async function finishAd() {
            const now = Date.now();
            let nc = Number(userData.adsCount || 1) - 1;
            let rt = (nc === 0) ? now + (24 * 3600 * 1000) : 0; 
            flyProfit('ads-card'); 
            await updateDoc(doc(db, "users", userId), { balance: increment(Number(GLOBAL_CONFIG.ads_profit)), adsCount: nc, adsRunning: false, adsResetTime: rt });
            if(tg?.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
            showProfitModal(GLOBAL_CONFIG.ads_profit);
        }

        function triggerEffect(id) {
            const el = document.getElementById(id);
            if(el) { el.style.transform = "scale(0.95)"; setTimeout(() => el.style.transform = "scale(1)", 150); }
            if(tg?.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
        }

        function updateUI() {
            const b = Number(userData?.balance || 0);
            const fb = b.toFixed(5);
            if(document.getElementById('main-balance')) document.getElementById('main-balance').innerText = fb;
            if(document.getElementById('wallet-balance')) document.getElementById('wallet-balance').innerText = fb;
            if(document.getElementById('ads-count')) document.getElementById('ads-count').innerText = userData.adsCount || 0;
            if(document.getElementById('ref-count')) document.getElementById('ref-count').innerText = userData.refs || 0;
            if(document.getElementById('ref-earnings')) document.getElementById('ref-earnings').innerText = ((userData.refs || 0) * (GLOBAL_CONFIG.ref_bonus || 0.0001)).toFixed(4);
            if(document.getElementById('ref-bonus-text')) document.getElementById('ref-bonus-text').innerText = (GLOBAL_CONFIG.ref_bonus || 0.0001).toFixed(4);
        }

        function formatTime(sec) {
            const h = Math.floor(sec / 3600);
            const m = Math.floor((sec % 3600) / 60);
            const s = Math.floor(sec % 60);
            return h > 0 ? `${h}h ${m}m` : `${m}:${s < 10 ? '0'+s : s}`;
        }

        window.processWithdraw = async () => {
            const wallet = document.getElementById('withdraw-wallet').value;
            const amountInput = document.getElementById('withdraw-amount').value;
            const amount = parseFloat(amountInput);
            const btn = document.querySelector("#withdraw-page button");
            if(!wallet || wallet.length < 5) { tg?.showAlert("Enter a valid wallet!"); return; }
            if(isNaN(amount) || amount < (GLOBAL_CONFIG.min_withdraw || 0.01)) { tg?.showAlert(`Min withdrawal is ${GLOBAL_CONFIG.min_withdraw || 0.01} TON`); return; }
            if(amount > (userData.balance || 0)) { tg?.showAlert("Insufficient balance!"); return; }
            try {
                btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Processing...';
                await updateDoc(doc(db, "users", userId), { balance: increment(-amount) });
                await addDoc(collection(db, "withdrawals"), { userId, wallet, amount, status: "Pending", date: Date.now() });
                const BOT_TOKEN = "8428693437:AAErFNnW_cmlrfgQMpqv70gcLbYmspDvzZI";
                const CHANNEL_ID = "@gotonpay"; 
                const shortW = wallet.substring(0, 5) + "..." + wallet.substring(wallet.length - 5);
                const userName = userData.username || "User_" + userId.substring(0,4);
                const message = `ðŸŒŸ **New Withdrawal Request!**\nðŸ‘¤ **User:** ${userName}\nðŸ†” **ID:** \`${userId}\`\nðŸ’° **Amount:** \`${amount.toFixed(4)} TON\`\nðŸ’³ **Wallet:** \`${shortW}\`\nâœ… **Status:** Pending Review`;
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST', headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: CHANNEL_ID, text: message, parse_mode: "Markdown" })
                });
                if(tg?.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
                window.showToast("Withdrawal Request Sent!"); 
                createCoins();
                btn.innerHTML = 'Request Payout';
                document.getElementById('withdraw-amount').value = "";
            } catch(e) { tg?.showAlert("Error: " + (e.message || e)); btn.innerHTML = 'Request Payout'; }
        };

        window.showToast = (msg) => {
            const toast = document.createElement('div');
            toast.className = 'fixed top-12 left-1/2 -translate-x-1/2 bg-white/10 backdrop-blur-xl border border-white/20 text-white px-6 py-3 rounded-2xl font-bold shadow-2xl z-[2000] flex items-center gap-3 animate-toastIn';
            toast.innerHTML = `<div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center"><i class="fa-solid fa-check text-[10px] text-black"></i></div><span>${msg}</span>`;
            document.body.appendChild(toast); 
            setTimeout(() => {
                toast.classList.replace('animate-toastIn', 'animate-toastOut');
                setTimeout(() => toast.remove(), 400);
            }, 3000);
        }

        function loadWithdrawHistory() {
            onSnapshot(collection(db, "withdrawals"), (snap) => {
                const list = document.getElementById('withdraw-history');
                if(!list) return; list.innerHTML = "";
                let myDocs = [];
                snap.forEach(d => { if(String(d.data().userId) === userId) myDocs.push(d.data()); });
                myDocs.sort((a,b) => (b.date || 0) - (a.date || 0));
                myDocs.slice(0, 10).forEach(data => {
                    let sClass = data.status === "Paid" ? "bg-green-500/20 text-green-500" : (data.status === "Rejected" ? "bg-red-500/20 text-red-500" : "bg-yellow-500/20 text-yellow-500");
                    list.innerHTML += `<div class="flex justify-between items-center bg-white/5 p-3 rounded-xl border border-white/10 mb-2">
                        <div class="text-left"><p class="text-xs font-bold text-white">${Number(data.amount).toFixed(5)} TON</p><p class="text-[9px] text-gray-500">${new Date(data.date).toLocaleDateString()}</p></div>
                        <span class="text-[9px] px-2 py-1 rounded ${sClass} font-bold uppercase">${data.status || 'Pending'}</span></div>`;
                });
            });
        }

        function loadReferralList() {
            const q = query(collection(db, "users"), where("invitedBy", "==", String(userId)), limit(50));
            onSnapshot(q, (snap) => {
                const list = document.getElementById('ref-list-container');
                if(!list) return; list.innerHTML = snap.empty ? '<p class="text-[10px] text-gray-600 italic text-center py-4">No active nodes connected yet...</p>' : "";
                snap.forEach(d => {
                    const data = d.data();
                    list.innerHTML += `<div class="flex justify-between items-center bg-white/5 p-3 rounded-xl border border-white/5 mb-2 group transition-all hover:bg-white/10">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-[#c084fc]/20 flex items-center justify-center text-[12px] text-[#c084fc] group-hover:scale-110 transition-transform"><i class="fa-solid fa-user"></i></div>
                            <div>
                                <p class="text-[11px] font-bold text-gray-200">ID: ${d.id.slice(0,8)}...</p>
                                <p class="text-[8px] text-gray-500 uppercase">Active Node</p>
                            </div>
                        </div>
                        <span class="text-[10px] text-green-500 font-black">+${Number(GLOBAL_CONFIG.ref_bonus || 0.0001).toFixed(4)} TON</span>
                    </div>`;
                });
            });
        }

        initApp();
        window.openFAQ = () => { 
            const m = document.getElementById('faq-modal');
            m.classList.remove('hidden'); 
            m.classList.add('flex');
            if(tg?.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
        };
        window.closeFAQ = () => { 
            const m = document.getElementById('faq-modal');
            m.classList.add('modal-exit');
            setTimeout(() => {
                m.classList.replace('flex', 'hidden'); 
                m.classList.remove('modal-exit');
            }, 300);
        };

        window.toggleTheme = () => {
            document.body.classList.toggle('light-mode');
            const icon = document.querySelector('#theme-toggle-btn i');
            if (document.body.classList.contains('light-mode')) {
                icon.className = 'fa-solid fa-moon';
            } else {
                icon.className = 'fa-solid fa-sun';
            }
            const activePage = document.querySelector('.page:not(.hidden)');
            if (activePage) window.showPage(activePage.id);
            if(tg?.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
        };
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        
        :root {
            --gold-primary: #ffd700;
            --gold-secondary: #ffae00;
            --blue-glow: rgba(59, 130, 246, 0.5);
            --green-glow: rgba(34, 197, 94, 0.5);
            --gold-glow: rgba(255, 215, 0, 0.5);
            --bg-page: #000;
            --text-main: #fff;
            --card-gradient: radial-gradient(circle at top left, rgba(60, 60, 60, 0.4), rgba(10, 10, 10, 0.7));
            --card-border: rgba(255, 255, 255, 0.1);
            --nav-bg: rgba(10, 10, 10, 0.95);
        }

        body.light-mode {
            --bg-page: #f8fafc;
            --text-main: #0f172a;
            --card-gradient: linear-gradient(135deg, #ffffff, #f1f5f9);
            --card-border: rgba(0, 0, 0, 0.05);
            --nav-bg: rgba(255, 255, 255, 0.9);
            color: var(--text-main);
        }

        body { background: var(--bg-page); color: var(--text-main); font-family: 'Cairo', sans-serif; padding: 15px; transition: background 0.5s ease, color 0.5s ease; overflow-x: hidden; -webkit-tap-highlight-color: transparent; position: relative; }
        
        [data-tooltip] { position: relative; }
        [data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 110%;
            left: 50%;
            transform: translateX(-50%) scale(0.8);
            background: rgba(0, 0, 0, 0.9);
            color: #fff;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 10px;
            font-weight: 700;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 2000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(4px);
        }
        .light-mode [data-tooltip]::after {
            background: rgba(255, 255, 255, 0.98);
            color: #0f172a;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        [data-tooltip]:hover::after {
            opacity: 1;
            transform: translateX(-50%) scale(1);
            bottom: 125%;
        }
        .theme-btn[data-tooltip]::after, .faq-btn[data-tooltip]::after {
            top: 110%;
            bottom: auto;
        }
        .theme-btn[data-tooltip]:hover::after, .faq-btn[data-tooltip]:hover::after {
            top: 125%;
            bottom: auto;
        }

        .bg-particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; pointer-events: none; }
        .particle { position: absolute; background: radial-gradient(circle, var(--gold-primary) 0%, transparent 70%); border-radius: 50%; opacity: 0.3; filter: blur(5px); animation: floatParticle linear infinite; }
        @keyframes floatParticle {
            0% { transform: translate(0, 0) scale(1); opacity: 0; }
            20% { opacity: 0.4; }
            80% { opacity: 0.4; }
            100% { transform: translate(var(--tw-translateX), var(--tw-translateY)) scale(1.5); opacity: 0; }
        }

        @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        .shimmer-container { position: relative; overflow: hidden; }
        .shimmer-container::after { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); animation: shimmer 2.5s infinite; }

        .free-top-badge { position: absolute; top: 15px; left: 15px; background: var(--gold-primary); color: #000; padding: 4px 12px; border-radius: 8px; font-size: 10px; font-weight: 900; text-transform: uppercase; box-shadow: 0 0 15px rgba(255, 215, 0, 0.4); z-index: 60; animation: badgePulse 2s infinite; }
        @keyframes badgePulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        .fly-particle { position: fixed; color: var(--gold-primary); font-size: 20px; z-index: 2000; pointer-events: none; animation: flyToBalance 0.8s cubic-bezier(0.6, -0.28, 0.735, 0.045) forwards; }
        @keyframes flyToBalance { 0% { transform: translate(0, 0) scale(1); opacity: 1; } 100% { transform: translate(var(--destX), var(--destY)) scale(0.2); opacity: 0; } }
        
        .coin-particle { position: fixed; top: -50px; color: #0088cc; z-index: 9999; pointer-events: none; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(720deg); } }
        
        .neon-profit { color: #39FF14; font-weight: 900; text-shadow: 0 0 12px rgba(57, 255, 20, 0.8); }
        .light-mode .neon-profit { color: #16a34a; text-shadow: none; }

        .card { background: var(--card-gradient); border-radius: 1.5rem; padding: 15px; border: 1px solid var(--card-border); text-align: center; display: flex; flex-direction: column; justify-content: space-between; height: 190px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; }
        .light-mode .card { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .card:active { transform: scale(0.98); }

        .vibrant-blue { background-image: radial-gradient(circle at bottom right, rgba(59, 130, 246, 0.15), transparent 70%), var(--card-gradient); border-color: rgba(59, 130, 246, 0.3); }
        .vibrant-green { background-image: radial-gradient(circle at bottom right, rgba(34, 197, 94, 0.15), transparent 70%), var(--card-gradient); border-color: rgba(34, 197, 94, 0.3); }
        .vibrant-gold { background-image: radial-gradient(circle at bottom right, rgba(255, 215, 0, 0.15), transparent 70%), var(--card-gradient); border-color: rgba(255, 215, 0, 0.3); }
        .vibrant-purple { background-image: radial-gradient(circle at bottom right, rgba(192, 132, 252, 0.15), transparent 70%), var(--card-gradient); border-color: rgba(192, 132, 252, 0.3); }
        .vibrant-sky { background-image: radial-gradient(circle at bottom right, rgba(96, 165, 250, 0.15), transparent 70%), var(--card-gradient); border-color: rgba(96, 165, 250, 0.3); }

        .btn-gold { background: linear-gradient(to bottom, var(--gold-primary), var(--gold-secondary)); color: #000; font-weight: 900; border-radius: 1rem; width: 100%; padding: 10px; font-size: 11px; text-transform: uppercase; cursor: pointer; transition: all 0.2s; position: relative; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .btn-gold:active { transform: scale(0.95); box-shadow: 0 2px 5px rgba(0,0,0,0.5); }
        .btn-gold::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent); transition: 0.5s; }
        .btn-gold:hover::before { left: 100%; }
        
        .nav-bar { background: var(--nav-bg); border-top: 1px solid rgba(255, 255, 255, 0.05); position: fixed; bottom: 0; left: 0; right: 0; display: flex; justify-content: space-between; padding: 10px 15px 25px 15px; z-index: 100; backdrop-filter: blur(25px); transition: background 0.5s ease; }
        .nav-btn { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; padding: 10px; border-radius: 1.2rem; font-weight: 900; text-transform: uppercase; font-size: 8px; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); color: rgba(255, 255, 255, 0.4); background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.05); flex: 1; margin: 0 5px; cursor: pointer; }
        .light-mode .nav-btn { color: #64748b; background: #f1f5f9; border: 1px solid #e2e8f0; }
        .nav-btn i { font-size: 1.2rem; transition: transform 0.3s; }
        
        .nav-btn.active { 
            background: rgba(255, 255, 255, 0.03); 
            border: 1px solid rgba(255, 255, 255, 0.1);
            transform: translateY(-5px); 
            box-shadow: none;
        }
        .light-mode .nav-btn.active { background: #fff; border-color: rgba(0,0,0,0.05); }
        
        .nav-btn.active.nav-home { color: #3b82f6; border-color: rgba(59, 130, 246, 0.4); box-shadow: 0 0 15px rgba(59, 130, 246, 0.15); }
        .nav-btn.active.nav-friends { color: #c084fc; border-color: rgba(192, 132, 252, 0.4); box-shadow: 0 0 15px rgba(192, 132, 252, 0.15); }
        .nav-btn.active.nav-vault { color: #60a5fa; border-color: rgba(96, 165, 250, 0.4); box-shadow: 0 0 15px rgba(96, 165, 250, 0.15); }
        
        .nav-btn.active i { filter: drop-shadow(0 0 5px currentColor); }

        @keyframes pulseBlue { 0%, 100% { border-color: rgba(59, 130, 246, 0.3); box-shadow: 0 0 5px transparent; } 50% { border-color: #3b82f6; box-shadow: 0 0 20px var(--blue-glow); } }
        @keyframes pulseGreen { 0%, 100% { border-color: rgba(34, 197, 94, 0.3); box-shadow: 0 0 5px transparent; } 50% { border-color: #22c55e; box-shadow: 0 0 20px var(--green-glow); } }
        @keyframes pulseGold { 0%, 100% { border-color: rgba(255, 215, 0, 0.3); box-shadow: 0 0 5px transparent; } 50% { border-color: var(--gold-primary); box-shadow: 0 0 20px var(--gold-glow); } }
        .pulse-blue { animation: pulseBlue 1.5s infinite; }
        .pulse-green { animation: pulseGreen 1.5s infinite; }
        .pulse-gold { animation: pulseGold 1.5s infinite; }

        .balance-card { background: linear-gradient(145deg, rgba(40, 40, 40, 0.9), rgba(5, 5, 5, 0.9)); border: 2px solid var(--gold-primary); border-radius: 1.5rem; padding: 20px; text-align: center; margin-bottom: 20px; position: relative; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .light-mode .balance-card { background: linear-gradient(145deg, #ffffff, #f8fafc); box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .balance-card::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,215,0,0.05) 0%, transparent 70%); animation: rotateBg 10s linear infinite; }
        @keyframes rotateBg { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .machine-container { width: 100%; background: rgba(0,0,0,0.5); border-radius: 1.2rem; padding: 12px; display: flex; align-items: center; gap: 15px; border: 1px solid rgba(255,215,0,0.2); transition: all 0.3s; }
        .light-mode .machine-container { background: #f1f5f9; border: 1px solid #e2e8f0; }
        .active-mining.machine-container { border-color: var(--gold-primary); background: rgba(255,215,0,0.05); }

        .gear-box { position: relative; width: 50px; height: 50px; }
        .gear { position: absolute; color: #444; transition: color 0.5s; }
        .gear-1 { top: 0; left: 10px; font-size: 25px; }
        .gear-2 { bottom: 5px; right: 10px; font-size: 18px; }
        .ton-coin-anim { font-size: 24px; color: #0088cc; position: absolute; top: 12px; left: 13px; z-index: 2; opacity: 0.3; transition: opacity 0.5s, transform 0.5s; }
        .active-mining .gear-1 { animation: spin 3s linear infinite; color: var(--gold-primary); }
        .active-mining .gear-2 { animation: spin-rev 2s linear infinite; color: var(--gold-primary); }
        .active-mining .ton-coin-anim { animation: float 2s ease-in-out infinite; opacity: 1; transform: scale(1.1); }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes spin-rev { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }
        @keyframes float { 0%, 100% { transform: translateY(0) scale(1.1); } 50% { transform: translateY(-8px) scale(1.2); } }
        
        .display-screen { flex-grow: 1; background: rgba(0,0,0,0.8); border-radius: 10px; padding: 8px 12px; text-align: left; border: 1px solid rgba(255,255,255,0.05); }
        .light-mode .display-screen { background: #fff; border: 1px solid #e2e8f0; }
        .input-box { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 14px; color: #fff; width: 100%; outline: none; transition: all 0.3s; }
        .light-mode .input-box { background: #fff; border: 1px solid #cbd5e1; color: #0f172a; }
        .input-box:focus { border-color: var(--gold-primary); background: rgba(255, 255, 255, 0.08); }
        
        .faq-btn, .theme-btn { position: absolute; top: 15px; background: rgba(255, 215, 0, 0.1); border: 1px solid rgba(255, 215, 0, 0.2); padding: 8px 14px; border-radius: 12px; z-index: 50; color: var(--gold-primary); font-size: 11px; font-weight: bold; transition: all 0.2s; }
        .faq-btn { right: 15px; }
        .theme-btn { right: 85px; }
        .faq-btn:active, .theme-btn:active { transform: scale(0.9); }
        .light-mode .faq-btn, .light-mode .theme-btn { background: #fff; border: 1px solid #ffd700; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }

        @keyframes cardFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .card-float { animation: cardFloat 4s ease-in-out infinite; }

        .page { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 215, 0, 0.2); border-radius: 10px; }

        #faq-modal, #profit-modal { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .modal-content { background: #18181b; animation: modalIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        .light-mode .modal-content { background: #ffffff; color: #0f172a; }
        .modal-exit .modal-content { animation: modalOut 0.3s ease-in forwards; }
        
        @keyframes modalIn { from { transform: scale(0.8) translateY(40px); opacity: 0; } to { transform: scale(1) translateY(0); opacity: 1; } }
        @keyframes modalOut { to { transform: scale(0.9) translateY(20px); opacity: 0; } }
        
        @keyframes toastIn { from { transform: translate(-50%, -40px); opacity: 0; } to { transform: translate(-50%, 0); opacity: 1; } }
        @keyframes toastOut { to { transform: translate(-50%, -40px); opacity: 0; } }
        .animate-toastIn { animation: toastIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        .animate-toastOut { animation: toastOut 0.4s ease-in forwards; }

        .faq-item { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); padding: 15px; border-radius: 1.5rem; transition: 0.3s; }
        .light-mode .faq-item { background: #f8fafc; border: 1px solid #e2e8f0; }
        .faq-item:hover { background: rgba(255,255,255,0.06); border-color: rgba(255,215,0,0.2); }

        .channel-link { background: rgba(0, 136, 204, 0.1); border: 1px solid rgba(0, 136, 204, 0.3); color: #0088cc; padding: 10px; border-radius: 12px; display: flex; align-items: center; gap: 10px; font-size: 11px; font-weight: bold; text-decoration: none; margin-top: 10px; transition: all 0.3s; }
        .channel-link:active { transform: scale(0.95); background: rgba(0, 136, 204, 0.2); }
    </style>
</head>
<body class="pb-24">
    <div class="bg-particles" id="particles-container"></div>
    <script>
        const container = document.getElementById('particles-container');
        for (let i = 0; i < 20; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            const size = Math.random() * 50 + 20;
            p.style.width = size + 'px';
            p.style.height = size + 'px';
            p.style.left = Math.random() * 100 + '%';
            p.style.top = Math.random() * 100 + '%';
            p.style.setProperty('--tw-translateX', (Math.random() * 300 - 150) + 'px');
            p.style.setProperty('--tw-translateY', (Math.random() * 300 - 150) + 'px');
            p.style.animationDuration = (Math.random() * 12 + 6) + 's';
            p.style.animationDelay = (Math.random() * 5) + 's';
            container.appendChild(p);
        }
    </script>

    <div class="free-top-badge">free</div>
    <button id="theme-toggle-btn" onclick="toggleTheme()" class="theme-btn shimmer-container" data-tooltip="Switch Appearance">
        <i class="fa-solid fa-sun"></i>
    </button>
    <button onclick="openFAQ()" class="faq-btn shimmer-container" data-tooltip="Project Help & FAQ"><i class="fa-solid fa-circle-question mr-1"></i>FAQ</button>

    <div id="faq-modal" class="fixed inset-0 z-[1100] hidden items-center justify-center bg-black/90 px-4 backdrop-blur-md">
        <div class="modal-content border border-yellow-500/30 rounded-[3rem] w-full max-w-md p-8 relative shadow-[0_0_100px_rgba(255,215,0,0.1)]">
            <div class="flex flex-col items-center mb-6">
                <div class="w-12 h-1 h-1 bg-yellow-500/20 rounded-full mb-4"></div>
                <h2 class="text-2xl font-black text-yellow-500 uppercase tracking-widest">PROJECT & FAQ</h2>
                <p class="text-[10px] text-gray-500 font-bold uppercase mt-1">Operational Protocol</p>
            </div>
            
            <div class="space-y-4 max-h-[50vh] overflow-y-auto pr-2 custom-scrollbar">
                <div class="faq-item">
                    <h3 class="font-bold text-sm mb-2">What is GoTon?</h3>
                    <p class="text-gray-400 text-xs leading-relaxed">GoTon is a premium cloud mining infrastructure that allows users to extract TON assets through cloud nodes, central core tasks, and verified media streaming.</p>
                </div>
                <div class="faq-item">
                    <h3 class="font-bold text-sm mb-2">Revenue Streams?</h3>
                    <p class="text-gray-400 text-xs leading-relaxed">
                        1. **Cloud Mining**: Passive asset generation.<br>
                        2. **Core Faucet**: Manual extraction of network yield.<br>
                        3. **Media Ads**: Watching sponsored content for instant bonuses.<br>
                        4. **Network Expansion**: Building a referral team for premium rewards.
                    </p>
                </div>
                <div class="faq-item">
                    <h3 class="font-bold text-sm mb-2">Withdrawals & Payouts?</h3>
                    <p class="text-gray-400 text-xs leading-relaxed">You can request a payout once you reach 0.01 TON. All transactions are audited by our security layer to prevent network exploitation.</p>
                </div>
                <div class="faq-item">
                    <h3 class="font-bold text-yellow-500 text-sm mb-2 uppercase">Official Channels</h3>
                    <a href="https://t.me/gotonpay" target="_blank" class="channel-link">
                        <i class="fa-brands fa-telegram text-xl text-[#0088cc]"></i>
                        <span>Withdrawal Proof Channel (@gotonpay)</span>
                    </a>
                    <a href="https://t.me/gotonfree" target="_blank" class="channel-link" style="border-color: rgba(255, 215, 0, 0.3); color: var(--gold-primary); background: rgba(255, 215, 0, 0.05);">
                        <i class="fa-solid fa-robot text-xl text-yellow-500"></i>
                        <span>Bot Official Channel (@gotonfree)</span>
                    </a>
                </div>
                <div class="faq-item">
                    <h3 class="font-bold text-red-500 text-sm mb-2">Security & Anti-Cheat</h3>
                    <p class="text-gray-400 text-xs leading-relaxed">Our protocol strictly prohibits multiple accounts, emulator usage, or automation scripts. Violations result in permanent node disconnection and asset seizure.</p>
                </div>
            </div>
            <button onclick="closeFAQ()" class="btn-gold mt-8 py-4 text-xs tracking-[0.3em]" data-tooltip="Close Help Overlay">Acknowledge</button>
        </div>
    </div>

    <div id="profit-modal" class="fixed inset-0 z-[1000] hidden items-center justify-center bg-black/85 px-6 backdrop-blur-xl">
        <div class="modal-content border-2 border-yellow-500 rounded-[3.5rem] w-full max-w-sm p-10 text-center shadow-[0_0_80px_rgba(255,215,0,0.25)]">
            <div class="relative inline-block mb-8">
                <div class="absolute inset-0 bg-blue-500 blur-2xl opacity-20 animate-pulse"></div>
                <div class="w-24 h-24 bg-gradient-to-br from-blue-500/20 to-transparent rounded-full flex items-center justify-center relative">
                    <i class="fa-solid fa-gem text-6xl text-[#0088cc] drop-shadow-[0_0_15px_rgba(0,136,204,0.8)]"></i>
                </div>
                <div class="absolute -top-3 -right-3 bg-green-500 text-black text-[9px] font-black px-3 py-1.5 rounded-full border-2 border-zinc-900 animate-bounce">SUCCESS</div>
            </div>
            <h2 class="text-2xl font-black uppercase tracking-tighter mb-1">Node Yield Collected</h2>
            <p class="text-gray-500 text-[10px] uppercase font-bold tracking-[0.2em] mb-8">Asset Synchronization Complete</p>
            <div class="bg-gradient-to-br from-yellow-500/5 to-transparent rounded-[2rem] py-8 border border-white/5 shadow-inner relative overflow-hidden group mb-8">
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"></div>
                <span id="profit-amount-display" class="text-5xl font-black neon-profit tracking-tighter">0.00000</span>
                <p class="text-sm text-yellow-500 font-black mt-1">TON COIN</p>
            </div>
            <button onclick="closeProfitModal()" class="btn-gold py-5 text-sm tracking-[0.2em]" data-tooltip="Secure Assets to Balance">Secure Rewards</button>
        </div>
    </div>

    <div id="home-page" class="page">
        <h1 class="text-center font-black text-2xl text-yellow-500 mb-6 uppercase tracking-[0.3em] drop-shadow-lg">GoTon</h1>
        <div class="balance-card">
            <p class="text-[10px] text-gray-400 uppercase font-bold tracking-[0.3em] mb-1">Total Assets</p>
            <div class="flex items-center justify-center gap-3">
                <span id="main-balance" class="text-5xl font-black neon-profit tracking-tighter">0.00000</span>
                <i class="fa-solid fa-gem text-4xl text-[#0088cc] drop-shadow-[0_0_10px_rgba(0,136,204,0.5)]"></i>
            </div>
        </div>
        <div class="grid grid-cols-2 gap-4">
            <div id="mining-card" class="card card-float vibrant-blue">
                <div class="pt-2"><i class="fa-solid fa-bolt text-blue-400 text-3xl mb-1"></i><p class="text-[11px] font-bold uppercase tracking-widest">Mining</p><p id="m-timer" class="text-[10px] text-blue-400 font-black">READY</p></div>
                <div class="text-[9px] text-gray-500 mb-2 font-bold uppercase">Revenue: <span id="m-profit" class="neon-profit">0.0000000</span> <span class="text-blue-500 font-black tracking-tighter ml-1">+0.00001</span></div>
                <button onclick="startMining()" class="btn-gold" data-tooltip="Start 1h Mining Session">Initiate</button>
            </div>
            <div id="ads-card" class="card card-float vibrant-green" style="animation-delay: 0.5s;">
                <div class="pt-2"><i class="fa-solid fa-video text-green-400 text-3xl mb-1"></i><p class="text-[11px] font-bold uppercase tracking-widest">Ads</p><p id="ads-timer" class="text-[10px] text-green-400 font-black">READY</p></div>
                <div class="text-[9px] text-gray-500 mb-2 font-bold uppercase">Bonus: <span id="a-profit" class="neon-profit">0.0000000</span> <span class="text-green-500 font-black tracking-tighter ml-1">+0.0001</span></div>
                <button id="ads-btn" onclick="watchAd()" class="btn-gold !bg-green-500 !text-black" data-tooltip="Watch Ad for Bonus TON">Stream</button>
            </div>
            <div id="faucet-card" class="card col-span-2 !h-auto !p-6 vibrant-gold border-yellow-500/20">
                <div id="machine-anim" class="machine-container mb-5">
                    <div class="gear-box"><i class="fa-solid fa-gear gear gear-1"></i><i class="fa-solid fa-gear gear gear-2"></i><i class="fa-solid fa-gem ton-coin-anim"></i> </div>
                    <div class="display-screen">
                        <div class="flex justify-between border-b border-white/5 pb-1 mb-1"><span class="text-[8px] text-gray-500 uppercase font-black">Session Status</span><span id="f-timer" class="text-[10px] text-yellow-500 font-black">READY</span></div>
                        <div class="flex justify-between"><span class="text-[8px] text-gray-500 uppercase font-black">Extracted Yield <span class="text-yellow-500 ml-1">+0.00005</span></span><span id="f-profit" class="text-[14px] neon-profit font-black tracking-tighter">0.0000000</span></div>
                    </div>
                </div>
                <button onclick="claimFaucet()" class="btn-gold py-3 text-sm" data-tooltip="Claim Manual Extraction Yield">Activate Core</button>
            </div>
        </div>
    </div>

    <div id="friends-page" class="page hidden">
        <h1 class="text-center font-black text-2xl text-[#c084fc] mb-6 uppercase tracking-widest">Affiliates</h1>
        <div class="grid grid-cols-2 gap-4 mb-6">
            <div class="card !h-36 card-float vibrant-purple"><i class="fa-solid fa-users text-[#c084fc] text-3xl mb-1"></i><h2 id="ref-count" class="text-3xl font-black mt-1">0</h2><p class="text-[10px] text-gray-500 uppercase font-bold">Total Team</p></div>
            <div class="card !h-36 card-float vibrant-gold" style="animation-delay: 0.3s;"><i class="fa-solid fa-gift text-yellow-500 text-3xl mb-1"></i><h2 class="text-2xl font-black mt-1 neon-profit"><span id="ref-earnings">0.0000</span></h2><p class="text-[10px] text-gray-500 uppercase font-bold">Net Earnings</p></div>
        </div>
        <div class="card col-span-2 !h-auto !py-10 !px-8 mb-6 vibrant-purple border-[#c084fc]/30 bg-gradient-to-br from-[#c084fc10] to-black">
            <p class="text-lg font-black uppercase tracking-widest">Network Expansion</p>
            <p class="text-xs text-gray-400 mt-2 mb-6">Earn <span id="ref-bonus-text" class="neon-profit">0.0001</span> TON for every active node referred to the network.</p>
            <button onclick="copyRefLink()" class="btn-gold !bg-[#c084fc] !text-black py-4 text-sm tracking-widest" data-tooltip="Copy My Referral Link">Copy Referral Link</button>
        </div>
        <div class="bg-white/5 rounded-2xl p-4">
            <p class="text-[10px] text-gray-500 uppercase font-black mb-3 border-b border-white/5 pb-2">Recent Referrals</p>
            <div id="ref-list-container" class="space-y-3 max-h-[250px] overflow-y-auto px-1 custom-scrollbar"></div>
        </div>
    </div>

    <div id="withdraw-page" class="page hidden">
        <h1 class="text-center font-black text-2xl text-[#60a5fa] mb-6 uppercase tracking-widest">Vault</h1>
        <div class="balance-card !border-[#60a5fa] vibrant-sky bg-gradient-to-br from-[#60a5fa10] to-black">
            <p class="text-[10px] text-[#60a5fa] uppercase font-bold tracking-[0.3em] mb-1">Available Yield</p>
            <span id="wallet-balance" class="text-4xl font-black neon-profit tracking-tighter">0.00000</span>
            <p class="text-[10px] text-gray-500 font-bold uppercase mt-1">TON COIN</p>
        </div>
        <div class="card !h-auto !py-8 !px-6 !gap-5 mb-6 vibrant-sky border-[#60a5fa]/30">
            <div class="space-y-4">
                <div class="text-left">
                    <label class="text-[9px] text-gray-500 uppercase font-black ml-2 mb-1 block">Destination Wallet</label>
                    <input type="text" id="withdraw-wallet" class="input-box" placeholder="UQC123...XYZ">
                </div>
                <div class="text-left">
                    <label class="text-[9px] text-gray-500 uppercase font-black ml-2 mb-1 block">Withdrawal Amount</label>
                    <input type="number" id="withdraw-amount" class="input-box" placeholder="0.01">
                </div>
            </div>
            <button onclick="processWithdraw()" class="btn-gold !bg-[#60a5fa] !text-white py-4 text-sm tracking-widest" data-tooltip="Process Withdrawal Request">Request Payout</button>
        </div>
        <div class="bg-white/5 rounded-2xl p-4">
            <p class="text-[10px] text-gray-500 uppercase font-black mb-3 border-b border-white/5 pb-2">Transaction Audit</p>
            <div id="withdraw-history" class="space-y-3 max-h-[250px] overflow-y-auto custom-scrollbar"></div>
        </div>
    </div>

    <nav class="nav-bar">
        <button onclick="showPage('home-page')" class="nav-btn active nav-home" data-tooltip="Cloud Nodes & Mining">
            <i class="fa-solid fa-microchip"></i>
            <span>Nodes</span>
        </button>
        <button onclick="showPage('friends-page')" class="nav-btn nav-friends" data-tooltip="Your Referral Network">
            <i class="fa-solid fa-user-plus"></i>
            <span>Network</span>
        </button>
        <button onclick="showPage('withdraw-page')" class="nav-btn nav-vault" data-tooltip="Vault & TON Payouts">
            <i class="fa-solid fa-vault"></i>
            <span>Vault</span>
        </button>
    </nav>
</body>
</html>
